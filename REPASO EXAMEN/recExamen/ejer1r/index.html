<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="vehiculo.js"></script>
    <script type="text/javascript" src="citaPrevia.js"></script>
    <title>Index</title>
</head>

<body>
    <script>
        var vehiculo1 = new Vehiculo("D");
        var vehiculo2 = new Vehiculo("B");
        var vehiculo3 = new Vehiculo("C");

        var citaPrevia1 = new CitaPrevia(new Date(2020, 03, 12, 03, 45), vehiculo1);
        var citaPrevia2 = new CitaPrevia(new Date(2013, 05, 12, 03, 45), vehiculo2);
        var citaPrevia3 = new CitaPrevia(new Date(2011, 05, 12, 03, 45), vehiculo3);

        var arrayCitas = new Array;

        var fechaAnio = prompt("Introduce fecha de la cita-aÃ±o", "yyyy");
        var fechaMes = prompt("Introduce fecha de la cita-mes", "mm");
        var fechaDia = prompt("Introduce fecha de la cita-dia", "dd");
        var fechaHora = prompt("Introduce fecha de la cita-hora", "hh");
        var fechaMinutos = prompt("Introduce fecha de la cita-minutos", "mm");


        fechaDate = new Date(fechaAnio, fechaMes, fechaDia, fechaHora, fechaMinutos);
        var vehiculoTeclado = prompt("Introduce la matricula");
        var vehiculoT = new Vehiculo(vehiculoTeclado);
        var citaPreviaTeclado = new CitaPrevia(fechaDate, vehiculoT);


        //funciones

        var introduceCita = (introducir) => {

           
        arrayCitas.push(introducir);
        }

        var mostrarCitas = () => {
            arrayCitas.forEach(cita => {
                cita.infoCitaPrevia();
                document.write("<br>");
            })
        }

        var eliminarCita = (matricula) => {
            var buscar = buscarCita(matricula);
            if (buscar != -1) {
                arrayCitas.splice(buscar, 1);
                return true
            } else {
                document.write("La cita no ha sido eliminada");
            }
        }

        var ordenarCita = () => {
            return this.arrayCitas.sort(function (a, b){
                if (a.matricula > b.matricula) {
                    return 1;
                } else if (a.matricula < b.matricula) {
                    return -1;
                }
                return 0;
            });
        }

        /*var ordenarCita = () => {
            return this.arrayCitas.sort((a, b) =>
                a.matricula > b.matricula ? 1:
                a.matricula < b.matricula ? -1 :  
                    0
            );
        }*/                
        /*const data = ["Zaragoza", "madrid", "Barcelona"];
        data.sort((a, b) =>
            a.toLowerCase() > b.toLowerCase() ? 1 :
                a.toLowerCase() < b.toLowerCase() ? -1 :
                    0
        );
        console.log(data);
        // [ 'Barcelona', 'madrid', 'Zaragoza' ]*/


        //SOLO SE PUEDE CON CADENA
        var buscarCita = (matricula) => {
            return arrayCitas.findIndex((citaPrevia) => citaPrevia.vehiculo.matricula.toUpperCase() == matricula.toUpperCase());
        }

        //PRUEBA


        //introducir
        introduceCita(citaPrevia1);
        introduceCita(citaPrevia2);
        introduceCita(citaPrevia3);
        introduceCita(citaPreviaTeclado);

        //mostrar
        document.write("Todas las citas introducidas" + "<br>");
        mostrarCitas();
        document.write("<br>");


        //Buscar
        document.write("Citas encontradas por matricula del vehiculo" + "<br>");
        document.write(" ");
        document.write(" ");
        var buscar = buscarCita("D");
        document.write(arrayCitas[buscar].infoCitaPrevia());
        document.write("<br>");


        //Eliminar
        /*document.write("Citas disponibles (citas que no se han borrado)" + "<br>");
        document.write(" ");
        document.write(" ");
        var eliminar = eliminarCita("D");
        mostrarCitas();
        document.write("<br>");*/

        //ordenar Cita
        document.write("Citas ordenadas por matricula" + "<br>");
        document.write(" ");
        ordenarCita();
        mostrarCitas();
        document.write("<br>");



    </script>

</body>

</html>